<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>正则表达式</title>
    <meta name="generator" content="VuePress 1.9.9">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/Hrgee/assets/css/0.styles.4f4d51f6.css" as="style"><link rel="preload" href="/Hrgee/assets/js/app.27d78a7b.js" as="script"><link rel="preload" href="/Hrgee/assets/js/2.733019b2.js" as="script"><link rel="preload" href="/Hrgee/assets/js/16.c0040550.js" as="script"><link rel="prefetch" href="/Hrgee/assets/js/10.7ccebb7c.js"><link rel="prefetch" href="/Hrgee/assets/js/11.33dcb92d.js"><link rel="prefetch" href="/Hrgee/assets/js/12.f1df6114.js"><link rel="prefetch" href="/Hrgee/assets/js/13.b59e04d3.js"><link rel="prefetch" href="/Hrgee/assets/js/14.4e4b238e.js"><link rel="prefetch" href="/Hrgee/assets/js/15.425f24f3.js"><link rel="prefetch" href="/Hrgee/assets/js/17.f2889cf9.js"><link rel="prefetch" href="/Hrgee/assets/js/18.b9dae3fb.js"><link rel="prefetch" href="/Hrgee/assets/js/19.f9ffe888.js"><link rel="prefetch" href="/Hrgee/assets/js/20.6803e588.js"><link rel="prefetch" href="/Hrgee/assets/js/21.3dd21fa9.js"><link rel="prefetch" href="/Hrgee/assets/js/22.9da5fa5c.js"><link rel="prefetch" href="/Hrgee/assets/js/3.d9b695e0.js"><link rel="prefetch" href="/Hrgee/assets/js/4.d12742be.js"><link rel="prefetch" href="/Hrgee/assets/js/5.216cae74.js"><link rel="prefetch" href="/Hrgee/assets/js/6.2d0a63f8.js"><link rel="prefetch" href="/Hrgee/assets/js/7.9c9172a7.js"><link rel="prefetch" href="/Hrgee/assets/js/8.9031bae3.js"><link rel="prefetch" href="/Hrgee/assets/js/9.26d3d10e.js">
    <link rel="stylesheet" href="/Hrgee/assets/css/0.styles.4f4d51f6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Hrgee/" class="home-link router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Hrgee/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Ling blog" class="dropdown-title"><span class="title">Ling blog</span> <span class="arrow down"></span></button> <button type="button" aria-label="Ling blog" class="mobile-dropdown-title"><span class="title">Ling blog</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/Hgrre/Hrgee.git" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Hrgee/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Ling blog" class="dropdown-title"><span class="title">Ling blog</span> <span class="arrow down"></span></button> <button type="button" aria-label="Ling blog" class="mobile-dropdown-title"><span class="title">Ling blog</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/Hgrre/Hrgee.git" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/Hrgee/" class="sidebar-heading clickable router-link-active"><span>欢迎学习</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/Hrgee/" aria-current="page" class="sidebar-link">博客介绍</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/Hrgee/handbook/图片隐写" class="sidebar-heading clickable"><span>CTF-WP</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/Hrgee/handbook/Python笔记" class="sidebar-heading clickable"><span>Python基础</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/Hrgee/handbook/Linux笔记" class="sidebar-heading clickable"><span>Linux基础</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/Hrgee/handbook/sql" class="sidebar-heading clickable open active"><span>渗透</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/Hrgee/handbook/sql.html" aria-current="page" class="active sidebar-link">SQL注入</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Hrgee/handbook/sql.html#正则表达式" class="sidebar-link">正则表达式</a></li><li class="sidebar-sub-header"><a href="/Hrgee/handbook/sql.html#单引号和双引号的区别" class="sidebar-link">单引号和双引号的区别</a></li><li class="sidebar-sub-header"><a href="/Hrgee/handbook/sql.html#sql注入" class="sidebar-link">sql注入</a></li><li class="sidebar-sub-header"><a href="/Hrgee/handbook/sql.html#检测网页是否存在sql注入" class="sidebar-link">检测网页是否存在sql注入</a></li><li class="sidebar-sub-header"><a href="/Hrgee/handbook/sql.html#union-联合查询" class="sidebar-link">union 联合查询</a></li><li class="sidebar-sub-header"><a href="/Hrgee/handbook/sql.html#查询数据库的字段" class="sidebar-link">查询数据库的字段</a></li><li class="sidebar-sub-header"><a href="/Hrgee/handbook/sql.html#查询当前网页的数据库名" class="sidebar-link">查询当前网页的数据库名</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/Hrgee/handbook/C笔记" class="sidebar-heading clickable"><span>逆向</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/Hrgee/handbook/NA" class="sidebar-heading clickable"><span>网络通讯基础</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/Hrgee/handbook/windows" class="sidebar-heading clickable"><span>操作系统</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/Hrgee/handbook/JS" class="sidebar-heading clickable"><span>Web渗透</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/Hrgee/handbook/web" class="sidebar-heading clickable"><span>Web</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="正则表达式"><a href="#正则表达式" class="header-anchor">#</a> 正则表达式</h2> <p><img src="https://rtyu-1317440738.cos.ap-guangzhou.myqcloud.com/202305111157958.webp" alt="Img"></p> <div class="language-PHP extra-class"><pre class="language-php"><code># php中使用正则规则一定要加代表正则的标识符`//`

preg_match_all (正则表达式、匹配字符串、匹配到的东西放入数组)
# 返回匹配到的次数

<span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token variable">$a</span> <span class="token operator">=</span> <span class="token function">preg_match_all</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'/A123/'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'A123A123'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token variable">$a</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token delimiter important">?&gt;</span></span>
 # 输出结果是int(2);


preg_replace (正则表达式、替换成什么、匹配字符串)
# 返回替换后的结果

<span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token variable">$a</span> <span class="token operator">=</span> <span class="token function">preg_replace</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'/a'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'/b'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'aaaccc'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token delimiter important">?&gt;</span></span>
# 输出结果是string(6)&quot;aaaccc&quot;;
</code></pre></div><p><img src="https://rtyu-1317440738.cos.ap-guangzhou.myqcloud.com/202305111459906.webp" alt="Img"></p> <h2 id="单引号和双引号的区别"><a href="#单引号和双引号的区别" class="header-anchor">#</a> 单引号和双引号的区别</h2> <ul><li>1：单引号(就代表折纯字符)用于表示字符串的标记在使用单引号的时候，字符串中的任何内容都会被视为普通文本，不会被解释为变量或特殊字符</li> <li>2.双引号会解析字符串中的变量，而在双引号定义的字符串中，它可以转义更多的特殊字符。</li> <li><span style="color:rgb(255, 76, 0);">!!!:</span> 它们之间最大的区别是在于是否会解析变量。很明显以下代码输出双引号是可以解析的，而单引号是不可以解析的。所以在字符处理上单引号要优于双引号。</li> <li>如：</li></ul> <div class="language-PHP extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token comment"># $a = 'abc';</span>
<span class="token keyword">echo</span> <span class="token string single-quoted-string">'$a'</span><span class="token punctuation">;</span>
<span class="token delimiter important">?&gt;</span></span>
# 直接echo'$a',输出的是$a
# 加入一个变量$a,输出的是abc
</code></pre></div><h2 id="sql注入"><a href="#sql注入" class="header-anchor">#</a> sql注入</h2> <ul><li>本质是把用户输入的数据当作代码执行，也可以理解为用户输入的数据当作sql语句代码执行了。</li> <li>第一个关键条件是用户能够控制输入</li> <li>第二个关键条件是原本程序要执行的代码，拼接了用户输入的数据然后进行执行。</li></ul> <p>判断注入点方法: <code>and 1=1 (页面正常) and 1=2 (页面不正常)</code>
最简单的方法：页面后面加<code>'</code>,看页面是否报错
其他方法： 如果是数字型传参，可以尝试-1.如：<code>?id=1 页面显示id=1 的东西</code> <code>?id=2-1,也是页面显示id=1的东西</code>如果使用and 1=1 and 1=2 被拦截的可能性太高了，可以尝试<code>and-1=-1 and-1=-2 and 1&gt;0 or 1=1</code></p> <h2 id="检测网页是否存在sql注入"><a href="#检测网页是否存在sql注入" class="header-anchor">#</a> 检测网页是否存在sql注入</h2> <p>这里以封神台靶场的猫舍为例<a href="http://pu2lh35s.ia.aqlab.cn/" target="_blank" rel="noopener noreferrer">点击跳转<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，打开网站的主页中查看url，可以发现网址栏上有一个传参<code>/?id=1</code> ,很明显这是一个get传参。也就是说传参的东西很多时候会被拼接进数据库，这个时候我们就要去检测它是否存在sql注入了，</p> <p>输入/?id=1 , 发现页面是正常的，很明显这是一个get请求，并且他需要传递的参数是id，</p> <p><img src="https://rtyu-1317440738.cos.ap-guangzhou.myqcloud.com/202305112259291.webp" alt="Img"></p> <p>接下来再尝试把id的值改变一下，/?id=2 ,可以看到页面是不正常的，这说明该网站存在sql注入</p> <p><img src="https://rtyu-1317440738.cos.ap-guangzhou.myqcloud.com/202305112307694.webp" alt="Img"></p> <p>在这里还要再区分字符串和代码的区别：</p> <ul><li>如果说and 1=1 被当作代码来执行， and 1=1 没有被代码当作代码来执行，而它只能当作这个id 传参来进行，最后它肯定不会有东西输出。</li> <li>当然在这个时候它有可能会对你id传参进行强制类型转换，如果输入的id是字母，则全被当作0来处理。</li> <li>在这过程如果将你的id传参强制转换为数字，而这个时候有可能会有显示</li> <li>也就是假设<code>id=1 database</code>后面无论跟了什么，在强制转换后id是1后面的都会被过滤掉。</li></ul> <p>当<code>id=1 and 1=1</code> 时，按照这个逻辑，提交看看它是否会有反应，1=1是一个恒等式所以它一定满足</p> <p><img src="https://rtyu-1317440738.cos.ap-guangzhou.myqcloud.com/202305112319666.webp" alt="Img"></p> <p>可以看到输入后页面回显正常，那么再进一步试试，当 <code>id=1 and 1=2</code> 时会有什么变化，按照代码逻辑这里肯定会报错的。</p> <p><img src="https://rtyu-1317440738.cos.ap-guangzhou.myqcloud.com/202305112340035.webp" alt="Img"></p> <p>页面的信息消失了而且又没有回显，现在就可以确定这里存在sql注入了。</p> <p>还有一种方法：加单引号 <code>'</code> 判断是否存在sql注入，如果单引号报错会使目标暂停报错屏蔽了，就没有数据返回。则说明这里存在sql注入</p> <p>再者在数据库上它也可以达成一个sql运算，它可以直接在rul栏来进行加减乘除。</p> <p>url是：统一资源标识符（英文Uniform Resource Identifier，URI），它允许用户对网络中的资源通过特定的协议进行交互操作。而+号在这里有特殊的意思，也就是空格的意思。</p> <p>也就是说url不能直接在id 传参后输+1，因为在get传参的时候它需要经过一次url编码。</p> <p>在url正常输入+号会被当作空格处理，如果想使用+号可以在url后面的+，<code>%2b</code> 才能执行。</p> <p>还可以使用sleep函数来判断是否存在sql注入。直接输入sleep(10)也就是叫页面休眠10秒钟再返回数据。</p> <p><img src="https://rtyu-1317440738.cos.ap-guangzhou.myqcloud.com/202305120009743.webp" alt="Img"></p> <p>可以看到页面正在加载中，证明我们输入的字符当作被命令执行了，这就是显错注入。</p> <p>sql注入能干嘛？：1.可以获取管理员账号密码，获取数据库里的信息。</p> <h2 id="union-联合查询"><a href="#union-联合查询" class="header-anchor">#</a> union 联合查询</h2> <p>含义：(将两条查询语句的结果整合到同一个表输出，两条查询语句的结果的字段数相同)</p> <h2 id="查询数据库的字段"><a href="#查询数据库的字段" class="header-anchor">#</a> 查询数据库的字段</h2> <p>可以使用 <code>order by</code> 函数</p> <p><img src="https://rtyu-1317440738.cos.ap-guangzhou.myqcloud.com/202305121052316.webp" alt="Img"></p> <p>可以看到页面有回显，说明该页面就有一个字段，那么再尝试输入3看看会有什么反应</p> <p><img src="https://rtyu-1317440738.cos.ap-guangzhou.myqcloud.com/202305121055633.webp" alt="Img"></p> <p>可以看到在这里页面报错了，说明该页面小于字段3，再试试输入2</p> <p><img src="https://rtyu-1317440738.cos.ap-guangzhou.myqcloud.com/202305121057785.webp" alt="Img"></p> <p>该页面回显正常，证明该页面的表一共有2个字段。</p> <p>既然知道是两个字段那就好判断了，<code>union select 1,2</code>  select 是输出1和2，在这里有一个<code>,</code> 逗号它会认为这是一个字段</p> <p><img src="https://rtyu-1317440738.cos.ap-guangzhou.myqcloud.com/202305121103791.webp" alt="Img"></p> <p>可以看到该页面回显正常，则说明这条语句成功执行了。</p> <p>这里说明一下，数据库输出数据是有选择的，有些字段可能输出了，有些字段可能没有输出</p> <p>数据库的结构：<code>库， 表，字段 ，数据</code> <code>selcet a from admin where id=1</code> id=1是查询admin 表里的id=1的数据并且只输出a 字段里面的结果</p> <h2 id="查询当前网页的数据库名"><a href="#查询当前网页的数据库名" class="header-anchor">#</a> 查询当前网页的数据库名</h2> <p>数据库名：database()函数；要求两边字段数都相同</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/Hrgee/handbook/Linux笔记.html" class="prev">
        linux笔记
      </a></span> <span class="next"><a href="/Hrgee/handbook/C笔记.html">
        C语言笔记
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/Hrgee/assets/js/app.27d78a7b.js" defer></script><script src="/Hrgee/assets/js/2.733019b2.js" defer></script><script src="/Hrgee/assets/js/16.c0040550.js" defer></script>
  </body>
</html>
