<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>逆向</title>
    <meta name="generator" content="VuePress 1.9.9">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/Hrgee/assets/css/0.styles.4f4d51f6.css" as="style"><link rel="preload" href="/Hrgee/assets/js/app.27d78a7b.js" as="script"><link rel="preload" href="/Hrgee/assets/js/2.733019b2.js" as="script"><link rel="preload" href="/Hrgee/assets/js/8.9031bae3.js" as="script"><link rel="prefetch" href="/Hrgee/assets/js/10.7ccebb7c.js"><link rel="prefetch" href="/Hrgee/assets/js/11.33dcb92d.js"><link rel="prefetch" href="/Hrgee/assets/js/12.f1df6114.js"><link rel="prefetch" href="/Hrgee/assets/js/13.b59e04d3.js"><link rel="prefetch" href="/Hrgee/assets/js/14.4e4b238e.js"><link rel="prefetch" href="/Hrgee/assets/js/15.425f24f3.js"><link rel="prefetch" href="/Hrgee/assets/js/16.c0040550.js"><link rel="prefetch" href="/Hrgee/assets/js/17.f2889cf9.js"><link rel="prefetch" href="/Hrgee/assets/js/18.b9dae3fb.js"><link rel="prefetch" href="/Hrgee/assets/js/19.f9ffe888.js"><link rel="prefetch" href="/Hrgee/assets/js/20.6803e588.js"><link rel="prefetch" href="/Hrgee/assets/js/21.3dd21fa9.js"><link rel="prefetch" href="/Hrgee/assets/js/22.9da5fa5c.js"><link rel="prefetch" href="/Hrgee/assets/js/3.d9b695e0.js"><link rel="prefetch" href="/Hrgee/assets/js/4.d12742be.js"><link rel="prefetch" href="/Hrgee/assets/js/5.216cae74.js"><link rel="prefetch" href="/Hrgee/assets/js/6.2d0a63f8.js"><link rel="prefetch" href="/Hrgee/assets/js/7.9c9172a7.js"><link rel="prefetch" href="/Hrgee/assets/js/9.26d3d10e.js">
    <link rel="stylesheet" href="/Hrgee/assets/css/0.styles.4f4d51f6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Hrgee/" class="home-link router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Hrgee/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Ling blog" class="dropdown-title"><span class="title">Ling blog</span> <span class="arrow down"></span></button> <button type="button" aria-label="Ling blog" class="mobile-dropdown-title"><span class="title">Ling blog</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/Hgrre/Hrgee.git" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Hrgee/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Ling blog" class="dropdown-title"><span class="title">Ling blog</span> <span class="arrow down"></span></button> <button type="button" aria-label="Ling blog" class="mobile-dropdown-title"><span class="title">Ling blog</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/Hgrre/Hrgee.git" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/Hrgee/" class="sidebar-heading clickable router-link-active"><span>欢迎学习</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/Hrgee/" aria-current="page" class="sidebar-link">博客介绍</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/Hrgee/handbook/图片隐写" class="sidebar-heading clickable"><span>CTF-WP</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/Hrgee/handbook/Python笔记" class="sidebar-heading clickable"><span>Python基础</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/Hrgee/handbook/Linux笔记" class="sidebar-heading clickable"><span>Linux基础</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/Hrgee/handbook/sql" class="sidebar-heading clickable"><span>渗透</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/Hrgee/handbook/C笔记" class="sidebar-heading clickable open active"><span>逆向</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/Hrgee/handbook/C笔记.html" class="active sidebar-link">C语言笔记</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Hrgee/handbook/C笔记.html#include" class="sidebar-link">include</a></li><li class="sidebar-sub-header"><a href="/Hrgee/handbook/C笔记.html#int-main" class="sidebar-link">int main</a></li><li class="sidebar-sub-header"><a href="/Hrgee/handbook/C笔记.html#scan输入类型问题" class="sidebar-link">scan输入类型问题</a></li><li class="sidebar-sub-header"><a href="/Hrgee/handbook/C笔记.html#long-int-失效的状态" class="sidebar-link">long int(失效的状态)</a></li><li class="sidebar-sub-header"><a href="/Hrgee/handbook/C笔记.html#scanf-的修饰" class="sidebar-link">scanf 的修饰</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/Hrgee/handbook/NA" class="sidebar-heading clickable"><span>网络通讯基础</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/Hrgee/handbook/windows" class="sidebar-heading clickable"><span>操作系统</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/Hrgee/handbook/JS" class="sidebar-heading clickable"><span>Web渗透</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/Hrgee/handbook/web" class="sidebar-heading clickable"><span>Web</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="逆向"><a href="#逆向" class="header-anchor">#</a> 逆向</h1> <h2 id="include"><a href="#include" class="header-anchor">#</a> include</h2> <p>(在c语言中，需要注意的是头文件的包含方式，)</p> <p><code>#include &lt;stdio.h&gt;</code> <code>#include &quot;stdio.h&quot;</code> 这两种是不一样的，用<code>&lt;&gt;</code>包含的头文件，系统只会在环境变量中搜索头文件库。如果是使用<code>&quot; &quot;</code>包含的头文件，系统只会先在当前目录里搜素，要是没找到才会去环境变量里找。</p> <h2 id="int-main"><a href="#int-main" class="header-anchor">#</a> int main</h2> <ul><li>是用户入口，用户从main函数开始有控制权，在mian函数开始可以接管程序的流程，也就是说main函数的返回值就是进程的返回值</li> <li>先获得操作系统版本</li> <li>初始化堆环境</li> <li>初始化多线程环境</li> <li>初始化ioi对象</li> <li>获取命令行</li> <li>获取环境变量</li> <li>格式化命令行</li> <li>初始化全局变量</li> <li>初始化获得程序进程的基本信息</li> <li>最后再找到main函数</li> <li>运行代码</li> <li>释放全局对象</li></ul> <p><strong>1：printf有三个变量分别是：</strong></p> <ul><li>功能stdout(格式化输出到标准输出设备，默认是显示器也可以说是屏幕)</li> <li>stdin(标准输入对象，默认是键盘)</li> <li>stderr(标准错误对象，默认是显示器，屏幕)</li></ul> <p><strong>2.printf也存在返回值，例如：</strong></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token comment">// --run--</span>
<span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;Hello world\r\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%d\r\n&quot;</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>运行结果是：<code>Hello world</code>, <code>14</code></p></blockquote> <h1 id="变量命名规范"><a href="#变量命名规范" class="header-anchor">#</a> 变量命名规范</h1> <div class="language-C extra-class"><pre class="language-c"><code>例如：
<span class="token keyword">int</span> nStudentCount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token keyword">float</span> fStudentCount <span class="token operator">=</span> <span class="token number">0.0f</span><span class="token punctuation">;</span>

<span class="token keyword">double</span> dblStudentCount <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span>

<span class="token keyword">char</span> cStudengCount <span class="token operator">=</span> <span class="token char">'\0'</span><span class="token punctuation">;</span>

<span class="token keyword">short</span> <span class="token keyword">int</span> snStudengCount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token operator">*</span>pnStudengCount <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="scanf从标准输入设备格式化到指定的内存地址上"><a href="#scanf从标准输入设备格式化到指定的内存地址上" class="header-anchor">#</a> * scanf从标准输入设备格式化到指定的内存地址上</h3> <ul><li><p><code>scanf(%d, &amp;n)</code> ,%d意思是存入的字符是整形(int),&amp;n是取变量n的地址</p></li> <li><p>假设我设置一个变量的值为999，则它对应的16进制是3e7。而它在系统中储存的方式是E7 03 00 00。读法是从右往左读，但每两个相邻的数字却是从左往右读。</p></li></ul> <p><img src="https://rtyu-1317440738.cos.ap-guangzhou.myqcloud.com/202305091942351.webp" alt="Img"></p> <ul><li>从标准输入设备格式化输入到指定内存地址上的数据存放方式有：
1.小尾方式：低数据位存放在低地址处，高数据位存放在高地址处
2.大尾方式：高数据为存放在低地址处，高数据存放在高地址处。其实两个都差不多意思</li></ul> <p><img src="https://rtyu-1317440738.cos.ap-guangzhou.myqcloud.com/202305091943293.webp" alt="Img"></p> <ul><li>还有在设置变量的时候一定要初始化，给出相对应的初始值，防止一些奇奇怪怪的问题</li></ul> <h2 id="scan输入类型问题"><a href="#scan输入类型问题" class="header-anchor">#</a> scan输入类型问题</h2> <ul><li>这一串代码输入1和2回车后会覆盖初始值</li></ul> <div class="language-c extra-class"><pre class="language-c"><code><span class="token comment">// --run--</span>
<span class="token keyword">short</span> <span class="token keyword">int</span> ary<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%08x\r\n&quot;</span><span class="token punctuation">,</span> ary<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">&quot;pause&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">&quot;%d&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>ary<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">&quot;%d&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>ary<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%08x\r\n&quot;</span><span class="token punctuation">,</span> ary<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%08x\r\n&quot;</span><span class="token punctuation">,</span> ary<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">&quot;pause&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>

</code></pre></div><ul><li>下图:可以看到从0018FF44~0018FF48这个地址的内存原本是0,但由于第一个scanf输入的值是1，所以覆盖成01 00 00 00因为后面的数本身就初始化为0了，所以暂时没看出有什么问题</li></ul> <p><img src="https://rtyu-1317440738.cos.ap-guangzhou.myqcloud.com/202305091943601.webp" alt="Img"></p> <ul><li>在第二个scanf中再输入2,又被覆盖成01 00 02 00，但是有一个问题出现了可以看到0018FF48~0018FF49这个地址后面的值本来是88 FF 现在被覆盖成00 00了。这里的数据是函数运行所需要的必要数据，该函数由于函数运行的必要数据被覆盖了，所以它将会在main函数返回的时候会影响到main函数，紧接着该程序就会崩了</li></ul> <p><img src="https://rtyu-1317440738.cos.ap-guangzhou.myqcloud.com/202305091943092.webp" alt="Img"></p> <h2 id="long-int-失效的状态"><a href="#long-int-失效的状态" class="header-anchor">#</a> long int(失效的状态)</h2> <ul><li><p>(short int 是整形减半)(long int 是整形翻倍) 整形翻倍就是4字节翻倍成8字节</p></li> <li><p>在微软/C语言开发环境下(long int 关键字是无效的，实际上只占了4字节，并没有像C语言标准那样占8字节)</p></li> <li><p>也就是说微软没按标准实施long int关键字</p></li></ul> <p>1.在微软下它做了一个<span style="color:rgb(255, 76, 0);">_int64</span>,这才是long int</p> <ul><li>下面表示是一个long int 类型的常量。！！！注意如果不在末尾加L就表示的是int 类型的常量，int类型的常量太大了就会装不下，也就是会溢出</li></ul> <p><img src="https://rtyu-1317440738.cos.ap-guangzhou.myqcloud.com/202305091944134.webp" alt="Img"></p> <p>想要能输入64位的整形也就是8字节的整形就要输入<code>scanf(&quot;%I64&quot;, &amp;x);</code>这里如果输i会没反应要输I ,才可以成功的输入8字节的数据</p> <h2 id="scanf-的修饰"><a href="#scanf-的修饰" class="header-anchor">#</a> scanf 的修饰</h2> <p>案例：</p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token keyword">char</span> szBuf<span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%08x\r\n&quot;</span><span class="token punctuation">,</span> szBuf<span class="token punctuation">)</span><span class="token punctuation">;</span> #<span class="token punctuation">(</span>显示首地址<span class="token punctuation">)</span>
<span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">&quot;%s&quot;</span><span class="token punctuation">,</span> szBuf<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">printf</span><span class="token punctuation">(</span>azBuf<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>szBuf是以0结尾字符串的意思，</li></ul> <p><img src="https://rtyu-1317440738.cos.ap-guangzhou.myqcloud.com/202305091944582.webp" alt="Img"></p> <p>在程序中输入Hello World 然后在内存中只看到hello进来了，而world没进来。</p> <p><img src="https://rtyu-1317440738.cos.ap-guangzhou.myqcloud.com/202305091945195.webp" alt="Img"></p> <p>原因是<code>scanf在%s</code>遇到空格或回车是被截断符截断了。因此可以在%s前面加一些修饰如：<code>scanf(&quot;%[0-9]s&quot;, szBuf);</code> 得到</p> <p><img src="https://rtyu-1317440738.cos.ap-guangzhou.myqcloud.com/202305091945843.webp" alt="Img"></p> <p>从上面这图可以看到除了0-9以外的所有字符没有被存进内存中，由此可以推出以下规律：</p> <ul><li><code>scanf(&quot;%[a-z]s&quot;,szBUf);</code> 表示我输入合法字母只包含小写子母a到z</li> <li><code>scanf(&quot;%[4,5,6]s&quot;,szBuf);</code> 表示只含4，5，6</li> <li><code>scanf(&quot;%[0-9,a-z,A-Z]s&quot;,szuBf);</code> 这里支持混合，包含除回车、空格、符号以外的所有字符。</li> <li><code>scanf(&quot;%[^a-z]&quot;,str1);</code> ^ 是反条件的意思，什么都可以输入就是a-z不允许，不包括的意思。</li> <li><code>scanf(&quot;%19s&quot;,szBUf);</code> 19表示截断前最多只能接受19个字符，这种方法可以控制scanf 的输入字数限制，可以防止溢出。如果输入的是20就会被&quot;\0&quot; 覆盖了。</li></ul> <p>！！！：中括号里的限制方法叫正则表达式，想了解更多直接百度scanf正则表达式</p> <p><strong>整形转字符串</strong>：(取出每一位加上ASCII 字符0，还需检查范围)</p> <p>例如：325 取出3加上ASCIL 字符0.再把后面两个数以此类推都加上字符0，因为ASCII 0-9是顺着排的 ，最后再补一个&quot;\0&quot;。</p> <p><strong>进制转换</strong> ：</p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token comment">// 10 -1 -2 -3</span>
<span class="token comment">// 12.6 2 5</span>
<span class="token comment">// 1100.1 </span>


<span class="token comment">//101.011(2进制)</span>
<span class="token comment">// 1*2^2 + 0*2^1 + 1*2^0 + 0*2^-1 + 1*2^-2 + 1*2^-3</span>
<span class="token comment">// 4 + 1 + 0.25 + 0.125</span>
<span class="token comment">// 5.375</span>


<span class="token comment">// 3e7.7e (16进制)</span>
<span class="token comment">// 3*16^2 + 14*16^1 + 7*16^-1 + 7*16^-1 + 14*16^-2</span>

</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/Hrgee/handbook/sql.html" class="prev">
        SQL注入
      </a></span> <span class="next"><a href="/Hrgee/handbook/NA.html">
        NA基础
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/Hrgee/assets/js/app.27d78a7b.js" defer></script><script src="/Hrgee/assets/js/2.733019b2.js" defer></script><script src="/Hrgee/assets/js/8.9031bae3.js" defer></script>
  </body>
</html>
